SELECT NAME, USERID, PWD, EMAIL, PHONE, ADMIN, JOINDATE
FROM MEMBER;

SELECT NAME, USERID, PWD, EMAIL, PHONE, ADMIN, JOINDATE
FROM MEMBER
WHERE USERID = 'parkgy';

INSERT INTO MEMBER (NAME, USERID, PWD, EMAIL, PHONE, ADMIN)
values('박규영', 'parkgy', '1234', 'pgy@gamil.com', '010-1111-2222', 0);

UPDATE MEMBER
SET name='문채원', pwd='5678', email='mcw@gmail.com', phone='010-3333-5555', ADMIN=1, JOINDATE='2020-08-20'
WHERE userid = 'parkgy';

DELETE 
FROM MEMBER
WHERE userid = 'parkgy';




--usercheck
SELECT pwd FROM MEMBER WHERE USERID ="parkgy";

--login
SELECT NAME, USERID, PWD, EMAIL, PHONE, ADMIN, JOINDATE
FROM MEMBER
WHERE USERID = 'parkgy' AND pwd = '1234';

SELECT TITLE_NO, TITLE_NAME FROM TITLE;


SELECT MAX(TITLE_NO)+1 FROM TITLE;

DELETE 
FROM TITLE
WHERE TITLE_NO = 8;

INSERT INTO TITLE values(5,'사원');


SELECT DEPT_NO, DEPT_NAME, FLOOR FROM DEPARTMENT;

SELECT DEPT_NO, DEPT_NAME, FLOOR FROM DEPARTMENT WHERE DEPT_NO = 1;

SELECT MAX(DEPT_NO)+1 FROM DEPARTMENT;

UPDATE DEPARTMENT SET DEPT_NAME = '총총무', FLOOR = 8 WHERE DEPT_NO = 4;
UPDATE DEPARTMENT SET DEPT_NAME = '총무', FLOOR = 7 WHERE DEPT_NO = 4;


CREATE OR REPLACE VIEW VW_EMPLOYEE_JOIN AS 
SELECT e.EMP_NO, e.EMP_NAME, e.TNO, e.MANAGER , e.SALARY, e.DNO, e.REGDATE, e.EMAIL , e.TEL , e.PIC_URL, 
       t.TITLE_NAME, d.DEPT_NAME, m.EMP_NAME MANAGER_NAME
  FROM EMPLOYEE e JOIN TITLE t ON e.TNO = t.TITLE_NO 
       LEFT JOIN EMPLOYEE m ON e.MANAGER = m.EMP_NO 
       JOIN DEPARTMENT d ON e.DNO = d.DEPT_NO; 

SELECT EMP_NO, EMP_NAME, TNO, MANAGER, SALARY, DNO, REGDATE, EMAIL, 
TEL, PIC_URL, TITLE_NAME, DEPT_NAME, MANAGER_NAME 
FROM VW_EMPLOYEE_JOIN;
 
 --로그인할때 필요하고 목록에는 보이면 안되니깐 패스워드는 뺐다고하심.


SELECT EMP_NO, EMP_NAME, TNO, MANAGER, SALARY, DNO, REGDATE, EMAIL, 
TEL, PIC_URL, TITLE_NAME, DEPT_NAME, MANAGER_NAME 
FROM VW_EMPLOYEE_JOIN WHERE EMP_NO = 3426;

INSERT INTO EMPLOYEE(EMP_NO, EMP_NAME, TNO, MANAGER, SALARY, DNO, EMAIL, PASSWD,TEL) 
VALUES(1365, '김상원', 5, 3426, 1500000, 1, 'test6@test.co.kr', '1234', '010-7777-1234');

-----------------------
SELECT NUM, PASS, NAME, EMAIL, TITLE, CONTENT, READCOUNT, WRITEDATE FROM BOARD;

SELECT PASS, NAME, EMAIL, TITLE, CONTENT, READCOUNT, WRITEDATE FROM BOARD WHERE num = ?;
SELECT PASS, NAME, EMAIL, TITLE, CONTENT, READCOUNT, WRITEDATE FROM BOARD WHERE num = 2;

INSERT INTO BOARD(PASS, NAME,  EMAIL, TITLE, CONTENT, READCOUNT, WRITEDATE)
VALUES(?,?,?,?,?,?,?);

UPDATE BOARD SET PASS=?, NAME=?, EMIAL=?, TITLE=?, CONTENT=?, READCOUNT=?, WRITEDATE=?
WHERE NUM = ?;

DELETE FROM BOARD WHERE NUM = ?;

DROP TABLE board;
DROP TRIGGER TRI_board_num_AUTOSEQ;
DROP SEQUENCE board_SEQ;


--SELECT MAX(num)+1 FROM Board;

UPDATE board SET readcount=readcount+1 WHERE num=4;
UPDATE BOARD SET READCOUNT = 0 WHERE NUM = 4;

SELECT NUM, PASS, NAME, EMAIL, TITLE, CONTENT, READCOUNT, WRITEDATE FROM board WHERE pass=? AND NUM=?
